<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Players</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Team Players</h1>

<nav>
  <a href="index.html">Leaderboard</a>
  <a href="add.html">Add Tournament</a>
</nav>

<input id="username" placeholder="Lichess username">
<button onclick="addPlayer()">Add Player</button>

<ul id="playerList"></ul>

<script src="db.js"></script>
<script>

function render(){
  const list=document.getElementById("playerList");
  list.innerHTML="";

  db.players.forEach(p=>{
    const li=document.createElement("li");

    li.innerHTML=`
      <input value="${p.username}" id="name-${p.id}">
      <button onclick="saveName('${p.id}')">Save</button>
      <button onclick="remove('${p.id}')">Delete</button>
    `;

    list.appendChild(li);
  });
}

function saveName(id){
  const v=document.getElementById("name-"+id).value.trim();
  db.editPlayer(id,v);
  render();
}

function remove(id){
  if(confirm("Delete player?")){
    db.deletePlayer(id);
    render();
  }
}

function addPlayer(){
  const name=document.getElementById("username").value.trim();
  if(!name) return;
  db.addPlayer(name);
  render();
}

render();
</script>
</body>
</html>
